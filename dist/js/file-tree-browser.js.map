{"version":3,"sources":["js/node_modules/browser-pack/_prelude.js","js/src/ts/file-tree-browser.ts"],"names":[],"mappings":"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","file":"file-tree-browser.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","declare const CryptoJS: any;\r\ndeclare const sortable: any;\r\n\r\nclass FileTreeBrowser {\r\n    currentFolderId: string;\r\n    extTypes: object;\r\n    fileTypes: Array<string>;\r\n    foldersContent: Array<any>;\r\n    icons: any;\r\n    jsonTree: any;\r\n    listeningFolders: Array<string> = [];\r\n    options: any;\r\n    scriptSrc: string;\r\n    targetId: string;\r\n    template: any = null;\r\n\r\n    treeMarkup: string = '';\r\n\r\n    constructor(targetId: string, options: any = {}) {\r\n        this.targetId = targetId;\r\n\r\n        const defaults = {\r\n            connector: 'php',\r\n            // prefix folder names to accept numbered folders. allowed chars = [a-z-]+\r\n            folderPrefix: 'folder-',\r\n            dragAndDrop: true,\r\n            // available modes: list | grid\r\n            explorerMode: 'list',\r\n            extensions: ['.*'],\r\n            mainDir: 'demo-files',\r\n            maxDeph: 3,\r\n            cancelBtn: true,\r\n            cancelBtnText: 'Cancel',\r\n            okBtn: true,\r\n            okBtnText: 'OK',\r\n            template: 'bootstrap4',\r\n            elementClick: function (filePath: string, fileName: string, e: Event) {\r\n                console.log(filePath);\r\n                console.log(fileName);\r\n            },\r\n            cancelBtnClick: function () {\r\n                console.log('Cancel');\r\n            },\r\n            okBtnClick: function (filePath: string, fileName: string) {\r\n                console.log(filePath);\r\n                console.log(fileName);\r\n            }\r\n        };\r\n        this.options = { ...defaults, ...options };\r\n\r\n        this.icons = {\r\n            archive: 'ft-icon-file-zip',\r\n            excel: 'ft-icon-file-excel',\r\n            folder: 'ft-icon-folder',\r\n            folderOpen: 'ft-icon-folder-open',\r\n            html: 'ft-icon-html-five2',\r\n            image: 'ft-icon-file-picture',\r\n            music: 'ft-icon-file-music',\r\n            openoffice: 'ft-icon-file-openoffice',\r\n            pdf: 'ft-icon-file-pdf',\r\n            text: 'ft-icon-file-text2',\r\n            video: 'ft-icon-file-video',\r\n            word: 'ft-icon-file-word',\r\n            default: 'ft-icon-file-empty'\r\n        };\r\n        this.foldersContent = new Array();\r\n        this.fileTypes = Object.keys(this.icons);\r\n        this.extTypes = {\r\n            archive: ['7z', '7-Zip', 'arj', 'deb', 'pkg', 'rar', 'rpm', 'tar.gz', 'z', 'zip'],\r\n            excel: ['xls', 'xlsx'],\r\n            html: ['htm', 'html'],\r\n            image: ['bmp', 'gif', 'jpg', 'jpeg', 'png', 'svg', 'tif', 'tiff', 'webp'],\r\n            music: ['aif', 'mp3', 'mpa', 'ogg', 'wav', 'wma'],\r\n            openoffice: ['odt', 'ott', 'odm', 'ods', 'ots', 'odg', 'otg', 'odp', 'otp', 'odf', 'odc', 'odb'],\r\n            pdf: ['pdf'],\r\n            text: ['rtf', 'tex', 'txt'],\r\n            video: ['3g2', '3gp', 'avi', 'flv', 'h264', 'm4v', 'mkv', 'mov', 'mp4', 'mpg', 'rm', 'swf', 'vob', 'wmv'],\r\n            word: ['doc', 'docx']\r\n        }\r\n\r\n        this.scriptSrc = this.getScriptScr();\r\n\r\n        this.getFiles()\r\n            .then((data: string) => {\r\n                this.jsonTree = JSON.parse(data);\r\n                if (this.jsonTree.error) {\r\n                    throw this.jsonTree.error;\r\n                }\r\n\r\n                this.buildTree();\r\n                if (this.options.dragAndDrop === true) {\r\n                    if (typeof (CryptoJS) === \"undefined\") {\r\n                        this.loadScript(this.scriptSrc + 'lib/crypto-js/crypto-js.min.js');\r\n                    }\r\n                    if (typeof (sortable) === \"undefined\") {\r\n                        this.loadScript(this.scriptSrc + 'lib/html5sortable/html5sortable.min.js').then(() => {\r\n                            this.render();\r\n                        })\r\n                            .catch(() => {\r\n                                console.error('Script loading failed :( ');\r\n                            });\r\n                    } else {\r\n                        this.render();\r\n                    }\r\n                } else {\r\n                    this.render();\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.error('Augh, there was an error!', err);\r\n            });\r\n    }\r\n\r\n    public render() {\r\n        const $targetId = document.getElementById(this.targetId);\r\n        this.loadCss();\r\n        $targetId.querySelectorAll('.ft-tree')[0].innerHTML = this.treeMarkup;\r\n        const folders = $targetId.querySelectorAll('.ft-tree .ft-folder-container');\r\n        Array.prototype.forEach.call(folders, (el: HTMLElement) => {\r\n            el.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                // get all the parent folders\r\n                const parents = this.parentsUntil(el, 'ft-folder-container', 'ft-' + this.targetId + '-root');\r\n\r\n                // open all the parent folders, close the others\r\n                Array.prototype.forEach.call(folders, (folder: HTMLElement) => {\r\n                    const ic = folder.querySelector('i');\r\n                    if (parents.indexOf(folder) > -1) {\r\n                        folder.classList.add('ft-folder-open');\r\n                        ic.classList.remove(this.icons.folder);\r\n                        ic.classList.add(this.icons.folderOpen);\r\n                    } else {\r\n                        folder.classList.remove('ft-folder-open');\r\n                        ic.classList.add(this.icons.folder);\r\n                        ic.classList.remove(this.icons.folderOpen);\r\n                    }\r\n                });\r\n                this.currentFolderId = el.getAttribute('id');\r\n                this.loadFolder(this.currentFolderId);\r\n                return false;\r\n            });\r\n        });\r\n        // load the root folder explorer content\r\n        this.currentFolderId = 'ft-' + this.targetId + '-root';\r\n        this.loadFolder(this.currentFolderId);\r\n    }\r\n\r\n    /**\r\n    * Load js-tree + icon lib CSS\r\n    */\r\n    private loadCss() {\r\n        const ftIcons = document.getElementById('ft-icons');\r\n        if (ftIcons == undefined) {\r\n            const linkElement = document.createElement('link');\r\n            linkElement.setAttribute('id', 'ft-icons');\r\n            linkElement.setAttribute('rel', 'stylesheet');\r\n            linkElement.setAttribute('type', 'text/css');\r\n            linkElement.setAttribute('href', this.scriptSrc + 'icons/style.css');\r\n            document.getElementsByTagName('head')[0].appendChild(linkElement);\r\n        }\r\n        const ftCss = document.getElementById('ft-styles');\r\n        if (ftCss == undefined) {\r\n            const linkElement = document.createElement('link');\r\n            linkElement.setAttribute('id', 'ft-styles');\r\n            linkElement.setAttribute('rel', 'stylesheet');\r\n            linkElement.setAttribute('type', 'text/css');\r\n            linkElement.setAttribute('href', this.scriptSrc + 'templates/' + this.options.template + '.css');\r\n            document.getElementsByTagName('head')[0].appendChild(linkElement);\r\n        }\r\n    }\r\n\r\n    private loadScript(src: string) {\r\n        const script = document.createElement('script');\r\n        script.setAttribute('src', src);\r\n        document.body.appendChild(script);\r\n        return new Promise((res, rej) => {\r\n            script.onload = function () {\r\n                res(null);\r\n            }\r\n            script.onerror = function (e) {\r\n                rej(e);\r\n            }\r\n        });\r\n    }\r\n\r\n    private buildFolderContent(jst: Array<any>, url: string, deph: number) {\r\n        const folderContent: any = {\r\n            folders: [],\r\n            files: []\r\n        }\r\n        for (let key in jst) {\r\n            let value: any = jst[key];\r\n            if (typeof (value.ext) === 'undefined') {\r\n                // directory\r\n                let data: any = jst[key];\r\n                const folderName = key.replace(this.options.folderPrefix, '');\r\n                folderContent.folders.push({\r\n                    parent: data.parent,\r\n                    dataRefId: this.sanitizeFolderOrFile(key, 'folder') + '-' + (deph + 1).toString(),\r\n                    name: folderName,\r\n                    url: url + folderName + '/'\r\n                });\r\n            } else {\r\n                // file\r\n                const filedata = value;\r\n                Object.assign(filedata, { type: this.getFileType(filedata.ext) });\r\n                const icon: string = this.icons[filedata.type];\r\n                if (filedata.type === 'image') {\r\n                    folderContent.files.push({\r\n                        name: filedata.name,\r\n                        icon: icon,\r\n                        type: filedata.type,\r\n                        url: url + filedata.name,\r\n                        width: null,\r\n                        height: null\r\n                    });\r\n                } else {\r\n                    folderContent.files.push({\r\n                        name: filedata.name,\r\n                        icon: icon,\r\n                        size: filedata.size,\r\n                        type: filedata.type,\r\n                        url: url + filedata.name\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        return folderContent;\r\n    }\r\n\r\n    private buildTree(jst: Array<string> = this.jsonTree, url: string = this.options.mainDir + '/', deph: number = 0) {\r\n        if (deph === 0) {\r\n            const rootId: any = 'ft-' + this.targetId + '-root';\r\n            this.treeMarkup = `<ul class=\"ft-tree\"><li id=\"${rootId}\" class=\"ft-folder-container ft-folder-open\"><div><i class=\"${this.icons.folderOpen}\"></i><a href=\"#\" data-url=\"${url}\">root</a></div>`;\r\n            this.foldersContent[rootId] = this.buildFolderContent(this.jsonTree, url, deph);\r\n            deph += 1;\r\n        }\r\n        for (let key in jst) {\r\n            let jsonSubTree: any = jst[key];\r\n            if (typeof (jsonSubTree.ext) === 'undefined') {\r\n                // directory\r\n                const folderId: any = this.sanitizeFolderOrFile(key, 'folder') + '-' + deph.toString();\r\n                const folderName = key.replace(this.options.folderPrefix, '');\r\n                this.foldersContent[folderId] = this.buildFolderContent(jsonSubTree, url + folderName + '/', deph);\r\n                this.treeMarkup += `<ul><li id=\"${folderId}\" class=\"ft-folder-container\"><div><i class=\"${this.icons.folder}\"></i><a href=\"#\" data-url=\"${url + folderName}\">${folderName}</a></div>`;\r\n                if (deph < this.options.maxDeph) {\r\n                    this.buildTree(jsonSubTree, url + folderName + '/', deph + 1);\r\n                }\r\n                this.treeMarkup += `</li></ul>`;\r\n            }\r\n        }\r\n        if (deph === 0) {\r\n            this.treeMarkup += `</li></ul>`;\r\n        }\r\n    }\r\n\r\n    private enableDrag() {\r\n        let explorerContainerSelector: string = '.ft-explorer-list-container';\r\n        if (this.options.explorerMode === 'grid') {\r\n            explorerContainerSelector = '.ft-explorer-grid-container';\r\n        }\r\n\r\n        let folders: any = document.getElementById(this.targetId).querySelectorAll('.ft-folder-container');\r\n        sortable(explorerContainerSelector, {\r\n            items: '.ft-file-container',\r\n            acceptFrom: false\r\n        });\r\n        folders.forEach((folder: { getAttribute: (arg0: string) => any; }) => {\r\n            const folderId: string = folder.getAttribute('id');\r\n            // console.warn(folderId + ' => ' + this.currentFolderId);\r\n            if (this.listeningFolders.indexOf(folderId) === -1 || folderId.match(/^explorer-/)) {\r\n                if (folderId !== this.currentFolderId) {\r\n                    sortable('#' + folderId, {\r\n                        acceptFrom: '.ft-explorer-list-container, .ft-explorer-grid-container'\r\n                    });\r\n                    this.listeningFolders.push(folderId);\r\n                    // console.log('listening #' + folderId);\r\n                    sortable('#' + folderId)[0].addEventListener('sortupdate', this.moveFile.bind(this));\r\n                } else {\r\n                    // console.log('skip #' + folderId);\r\n                }\r\n            } else if (folderId === this.currentFolderId) {\r\n                sortable('#' + folderId, 'disable');\r\n                // console.log('disable #' + folderId);\r\n            } else {\r\n                sortable('#' + folderId, 'enable');\r\n                // console.log('enable #' + folderId);\r\n            }\r\n        });\r\n    }\r\n\r\n    private moveFile(e: any) {\r\n        for (let index = 0; index < e.detail.item.children.length; index++) {\r\n            const element = e.detail.item.children[index];\r\n            if (element.dataset.filename !== undefined && element.dataset.href !== undefined) {\r\n                const salt: string = '%t$qPP';\r\n                const filehash: string = encodeURIComponent(CryptoJS.SHA256(element.dataset.href + salt).toString());\r\n                const filename: string = encodeURIComponent(element.dataset.filename);\r\n                const filepath: string = encodeURIComponent(element.dataset.href);\r\n                const ext: string = encodeURIComponent(JSON.stringify(this.options.extensions));\r\n\r\n                let destpath: string = this.options.mainDir;\r\n                if (e.detail.destination.container.id !== 'ft-' + this.targetId + '-root') {\r\n                    destpath = document.getElementById(e.detail.destination.container.id.replace(/^explorer-/, '')).querySelector('div[draggable=\"true\"] > a').getAttribute('data-url');\r\n                }\r\n                destpath += '/' + element.dataset.filename;\r\n                destpath = encodeURIComponent(destpath);\r\n                if (destpath !== filepath) {\r\n                    const data: string = `filename=${filename}&filepath=${filepath}&destpath=${destpath}&filehash=${filehash}&ext=${ext}`;\r\n                    index = e.detail.item.children.length - 1;\r\n\r\n                    // move the file on server\r\n                    const request = new XMLHttpRequest();\r\n                    request.open('POST', this.scriptSrc + 'ajax/move-file.php', true);\r\n                    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n\r\n                    request.onload = () => {\r\n                        if (request.status >= 200 && request.status < 400) {\r\n                            // Success!\r\n                            const resp = JSON.parse(request.response);\r\n                            if (resp.status === 'success') {\r\n                                const container: HTMLElement = document.getElementById(e.detail.destination.container.id);\r\n                                const itemIndex: number = e.detail.destination.index;\r\n                                container.children[itemIndex].parentNode.removeChild(container.children[itemIndex]);\r\n\r\n                                // rebuild tree\r\n                                this.getFiles()\r\n                                    .then((responsedata: string) => {\r\n                                        this.jsonTree = JSON.parse(responsedata);\r\n                                        if (this.jsonTree.error) {\r\n                                            throw this.jsonTree.error;\r\n                                        }\r\n\r\n                                        this.buildTree();\r\n                                    })\r\n                                    .catch((err) => {\r\n                                        console.error('Augh, there was an error!', err);\r\n                                    });\r\n                            } else {\r\n                                console.error(resp);\r\n                            }\r\n                        } else {\r\n                            console.error('Ajax query failed');\r\n                        }\r\n                    };\r\n\r\n                    request.onerror = function () {\r\n                        console.error('There was a connection error of some sort');\r\n                    };\r\n                    request.send(data);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private getFileType(ext: string) {\r\n        const x: any = this.extTypes;\r\n        for (let key in x) {\r\n            let value: any = x[key];\r\n            if (value.indexOf(ext) !== -1) {\r\n\r\n                return key;\r\n            }\r\n        }\r\n\r\n        return 'default';\r\n    }\r\n\r\n    private getFiles() {\r\n        return new Promise((resolve, reject) => {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open('POST', this.scriptSrc + 'connectors/connector.' + this.options.connector, true);\r\n            xhr.onload = function () {\r\n                if (this.status >= 200 && this.status < 300) {\r\n                    resolve(xhr.response);\r\n                } else {\r\n                    reject({\r\n                        status: this.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                reject({\r\n                    status: this.status,\r\n                    statusText: xhr.statusText\r\n                });\r\n            };\r\n            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n            xhr.send('dir=' + encodeURI(this.options.mainDir) + '&ext=' + JSON.stringify(this.options.extensions) + '&folder_prefix=' + this.options.folderPrefix);\r\n        });\r\n    }\r\n\r\n    private getScriptScr() {\r\n        const sc = document.getElementsByTagName(\"script\");\r\n\r\n        for (let idx = 0; idx < sc.length; idx++) {\r\n            const s = sc.item(idx);\r\n\r\n            if (s.src && s.src.match(/file-tree-browser(\\.min)?\\.js$/)) {\r\n                return s.src.replace(/js\\/file-tree-browser(\\.min)?\\.js$/, '');\r\n            }\r\n        }\r\n    }\r\n\r\n    private humanFileSize(bytes: number, si: boolean) {\r\n        const thresh = si ? 1000 : 1024;\r\n        if (Math.abs(bytes) < thresh) {\r\n            return bytes + ' B';\r\n        }\r\n        const units = si\r\n            ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\r\n            : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n        let u = -1;\r\n        do {\r\n            bytes /= thresh;\r\n            ++u;\r\n        } while (Math.abs(bytes) >= thresh && u < units.length - 1);\r\n        return bytes.toFixed(1) + ' ' + units[u];\r\n    }\r\n\r\n    private loadFolder(folderId: any) {\r\n        const $targetId = document.getElementById(this.targetId);\r\n        const folderContent = this.foldersContent[folderId];\r\n        let clone: any;\r\n        let output: any;\r\n        this.loadTemplates().then((template: any) => {\r\n            this.template = template;\r\n            const folders = folderContent.folders;\r\n            const files = folderContent.files;\r\n\r\n            let explorerContainer: HTMLTemplateElement;\r\n            let explorerFile: HTMLTemplateElement;\r\n            let explorerFolder: HTMLTemplateElement;\r\n            let explorerImage: HTMLTemplateElement;\r\n            let explorerActionBtns: HTMLTemplateElement;\r\n            let explorerMode: HTMLTemplateElement;\r\n\r\n            explorerActionBtns = document.querySelector('#explorer-action-btns');\r\n            const explorerActionBtnsClone = explorerActionBtns.content.cloneNode(true);\r\n\r\n            explorerMode = document.querySelector('#explorer-mode');\r\n            const explorerModeClone = explorerMode.content.cloneNode(true);\r\n\r\n            switch (this.options.explorerMode) {\r\n                case 'list':\r\n                    explorerContainer = document.querySelector('#explorer-list');\r\n                    explorerFile = document.querySelector('#explorer-list-file');\r\n                    explorerFolder = document.querySelector('#explorer-list-folder');\r\n                    explorerImage = document.querySelector('#explorer-list-image');\r\n                    output = explorerContainer.content.querySelector('.ft-explorer-list-container').cloneNode(true);\r\n\r\n                    break;\r\n\r\n                case 'grid':\r\n                    explorerContainer = document.querySelector('#explorer-grid');\r\n                    explorerFile = document.querySelector('#explorer-grid-file');\r\n                    explorerFolder = document.querySelector('#explorer-grid-folder');\r\n                    explorerImage = document.querySelector('#explorer-grid-image');\r\n                    output = explorerContainer.content.querySelector('.ft-explorer-grid-container').cloneNode(true);\r\n\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            for (let key in folders) {\r\n                let folder: any = folders[key];\r\n                clone = explorerFolder.content.cloneNode(true);\r\n                clone.querySelector('li').setAttribute('id', 'explorer-' + folder.dataRefId);\r\n                clone.querySelector('.ft-folder').setAttribute('data-href', folder.dataRefId);\r\n                clone.querySelector('.ft-folder i').classList.add(this.icons.folder);\r\n                clone.querySelector('.ft-foldername').innerHTML = folder.name;\r\n                output.appendChild(clone);\r\n            }\r\n\r\n            for (let key in files) {\r\n                let file: any = files[key];\r\n                if (file.type === 'image') {\r\n                    let cloneId = Math.random().toString(36).substr(2, 9);\r\n                    clone = explorerImage.content.cloneNode(true);\r\n                    clone.querySelector('.ft-imagedesc').setAttribute('id', cloneId);\r\n                    clone.querySelector('.ft-image').setAttribute('data-href', file.url);\r\n                    clone.querySelector('.ft-image').setAttribute('data-filename', file.name);\r\n                    clone.querySelector('.ft-image img').setAttribute('src', file.url);\r\n                    clone.querySelector('.ft-imagename').innerHTML = file.name;\r\n                    output.appendChild(clone);\r\n                    let img = new Image();\r\n                    img.src = file.url;\r\n                    img.onload = () => {\r\n                        let el: HTMLElement = document.getElementById(cloneId);\r\n                        if (el !== null) {\r\n                            el.querySelector('.ft-image-size').innerHTML = img.width.toString() + 'x' + img.height.toString() + 'px';\r\n                        }\r\n                    };\r\n                } else {\r\n                    clone = explorerFile.content.cloneNode(true);\r\n                    clone.querySelector('.ft-file').setAttribute('data-href', file.url);\r\n                    clone.querySelector('.ft-file').setAttribute('data-filename', file.name);\r\n                    clone.querySelector('.ft-file i').classList.add(file.icon);\r\n                    clone.querySelector('.ft-filename').innerHTML = file.name;\r\n                    clone.querySelector('.ft-filesize').innerHTML = this.humanFileSize(file.size, true);\r\n                    output.appendChild(clone);\r\n                }\r\n            }\r\n            $targetId.querySelector('.ft-explorer').innerHTML = '';\r\n            $targetId.querySelector('.ft-explorer').appendChild(explorerModeClone);\r\n            $targetId.querySelector('.ft-explorer').appendChild(output);\r\n\r\n            if (this.options.okBtn === true || this.options.cancelBtn === true) {\r\n                $targetId.querySelector('.ft-explorer').appendChild(explorerActionBtnsClone);\r\n                if (this.options.okBtn !== true) {\r\n                    $targetId.querySelector('.explorer-ok-btn').remove();\r\n                } else {\r\n                    // translate\r\n                    $targetId.querySelector('.explorer-ok-btn').textContent = this.options.okBtnText;\r\n                }\r\n                if (this.options.cancelBtn !== true) {\r\n                    $targetId.querySelector('.explorer-cancel-btn').remove();\r\n                } else {\r\n                    // translate\r\n                    $targetId.querySelector('.explorer-cancel-btn').textContent = this.options.cancelBtnText;\r\n                }\r\n                if (this.options.okBtn === true) {\r\n                    $targetId.querySelector('.explorer-ok-btn').addEventListener('click', (e: any) => {\r\n                        e.preventDefault();\r\n                        const target: any = $targetId.querySelector('.ft-file-container.active a');\r\n                        if (target !== null) {\r\n                            const targetFilename = target.getAttribute('data-filename');\r\n                            const targetHref = target.getAttribute('data-href');\r\n                            this.options.okBtnClick(targetHref, targetFilename);\r\n                        } else {\r\n                            alert('Nothing selected');\r\n                        }\r\n\r\n                        return false;\r\n                    }, false);\r\n                }\r\n                if (this.options.cancelBtn === true) {\r\n                    $targetId.querySelector('.explorer-cancel-btn').addEventListener('click', (e: any) => {\r\n                        e.preventDefault();\r\n                        this.options.cancelBtnClick();\r\n\r\n                        return false;\r\n                    }, false);\r\n                }\r\n            }\r\n\r\n            const modeBtns = Array.from($targetId.querySelectorAll('.ft-explorer-mode .explorer-mode-btn'));\r\n\r\n            /* add explorer mode buttons events & activate the current btn */\r\n\r\n            modeBtns.forEach(m => {\r\n                if (m.getAttribute('value') === this.options.explorerMode) {\r\n                    m.classList.add('active');\r\n                }\r\n                m.addEventListener('click', (e: any) => {\r\n                    this.switchMode();\r\n                    this.loadFolder(folderId);\r\n                });\r\n            });\r\n\r\n            /* add explorer elements events */\r\n\r\n            const elements = Array.from($targetId.querySelectorAll('.ft-explorer a[data-href]'));\r\n            const elementContainers = Array.from($targetId.querySelectorAll('.ft-explorer .ft-file-container'));\r\n            elements.forEach(el => {\r\n                el.addEventListener('click', (e: any) => {\r\n                    e.preventDefault();\r\n                    elementContainers.forEach(elContainer => {\r\n                        elContainer.classList.remove('active');\r\n                    });\r\n                    const target: any = e.target.closest('a');\r\n                    if (target.closest('.ft-file-container') !== null) {\r\n                        target.closest('.ft-file-container').classList.add('active');\r\n                        const targetFilename = target.getAttribute('data-filename');\r\n                        const targetHref = target.getAttribute('data-href');\r\n                        this.options.elementClick(targetHref, targetFilename, e);\r\n                    }\r\n\r\n                    return false;\r\n                }, false);\r\n            });\r\n\r\n            /* add explorer folder events */\r\n            const links = Array.from($targetId.querySelectorAll('.ft-explorer a.ft-folder'));\r\n            links.forEach(l => {\r\n                l.addEventListener('click', (e: any) => {\r\n                    e.preventDefault();\r\n                    const target: any = e.target.closest('a');\r\n                    const targetId = target.getAttribute('data-href');\r\n                    if (targetId !== null) {\r\n                        let event = document.createEvent('HTMLEvents');\r\n                        event.initEvent('click', true, false);\r\n                        document.getElementById(targetId).dispatchEvent(event);\r\n                    }\r\n\r\n                    return false;\r\n                }, false);\r\n            });\r\n\r\n            // enable files / folders drag & drop\r\n            if (this.options.dragAndDrop === true) {\r\n                this.enableDrag();\r\n            }\r\n\r\n        })\r\n            .catch((err) => {\r\n                console.error('Augh, there was an error!', err);\r\n            });\r\n    }\r\n\r\n    private loadTemplates() {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.template !== null) {\r\n                resolve(this.template);\r\n            } else {\r\n                const ftMode = this.options.explorerMode;\r\n                let xhr = new XMLHttpRequest();\r\n                xhr.open('GET', this.scriptSrc + 'templates/' + this.options.template + '.html', true);\r\n                xhr.onload = function () {\r\n                    // console.log(xhr.response);\r\n                    if (this.status >= 200 && this.status < 300) {\r\n                        if (document.querySelectorAll('#explorer-' + ftMode).length < 1) {\r\n                            const div = document.createElement('div');\r\n                            div.innerHTML = xhr.response;\r\n                            while (div.children.length > 0) {\r\n                                document.body.appendChild(div.children[0]);\r\n                            }\r\n                        }\r\n                        resolve(xhr.response);\r\n                    } else {\r\n                        reject({\r\n                            status: this.status,\r\n                            statusText: xhr.statusText\r\n                        });\r\n                    }\r\n                };\r\n                xhr.onerror = function () {\r\n                    reject({\r\n                        status: this.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                };\r\n                xhr.send();\r\n            }\r\n        });\r\n    }\r\n\r\n    private parentsUntil(el: any, searchClass: string, stopElementId: string) {\r\n        const Parents = new Array();\r\n        while (el.parentNode) {\r\n            if (el.classList.contains(searchClass)) {\r\n                Parents.push(el);\r\n            }\r\n            el = el.parentNode;\r\n            if (el.id === stopElementId) {\r\n                Parents.push(el);\r\n                return Parents;\r\n            }\r\n        }\r\n        return Parents;\r\n    }\r\n\r\n    /**\r\n * @description Sanitizes a folder or file name to work with #name of legacy system\r\n *              Legacy system unknown\r\n * @author BM67\r\n * @param {String} name The string to sanitize\r\n * @param {String} type  Optional \"file\" or default is assumed \"folder\"\r\n * @return {String} The sanitized name\r\n */\r\n    private sanitizeFolderOrFile(name: string, type: string) {\r\n        var parts, ext = \"\";\r\n        if (type === \"file\") {\r\n            parts = name.split(\".\");\r\n            ext = \".\" + parts.pop();\r\n            name = parts.join(\"_\");\r\n        }\r\n        name = name.toLowerCase();\r\n        const items: Array<Array<any>> =\r\n            [\r\n                [/[+\\&]/g, \"u\"],\r\n                [//g, \"ae\"],\r\n                [//g, \"oe\"],\r\n                [//g, \"ue\"],\r\n                [//g, \"ss\"],\r\n                [/[ \\`\\\\?\\(\\)\\[\\]\\{\\}\\/\\\\$\\\\\"\\'\\!\\=\\-\\.\\,\\;\\:<>\\|\\^\\\\*\\+\\~\\%]/g, \"_\"]\r\n            ]\r\n        items.forEach(item => name = name.replace(item[0], item[1]));\r\n        return name + ext;\r\n    }\r\n\r\n    private switchMode() {\r\n        if (this.options.explorerMode === 'list') {\r\n            this.options.explorerMode = 'grid';\r\n        } else {\r\n            this.options.explorerMode = 'list';\r\n        }\r\n        for (let index = 0; index < this.listeningFolders.length; index++) {\r\n            if (this.listeningFolders[index].match(/^explorer-/)) {\r\n                this.listeningFolders.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nObject.assign(window, { FileTreeBrowser });\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvZmlsZS10cmVlLWJyb3dzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNHQSxNQUFNLGVBQWU7SUFlakIsWUFBWSxRQUFnQixFQUFFLFVBQWUsRUFBRTtRQVIvQyxxQkFBZ0IsR0FBa0IsRUFBRSxDQUFDO1FBSXJDLGFBQVEsR0FBUSxJQUFJLENBQUM7UUFFckIsZUFBVSxHQUFXLEVBQUUsQ0FBQztRQUdwQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUV6QixNQUFNLFFBQVEsR0FBRztZQUNiLFNBQVMsRUFBRSxLQUFLO1lBQ2hCLDBFQUEwRTtZQUMxRSxZQUFZLEVBQUUsU0FBUztZQUN2QixXQUFXLEVBQUUsSUFBSTtZQUNqQiwrQkFBK0I7WUFDL0IsWUFBWSxFQUFFLE1BQU07WUFDcEIsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDO1lBQ2xCLE9BQU8sRUFBRSxZQUFZO1lBQ3JCLE9BQU8sRUFBRSxDQUFDO1lBQ1YsU0FBUyxFQUFFLElBQUk7WUFDZixhQUFhLEVBQUUsUUFBUTtZQUN2QixLQUFLLEVBQUUsSUFBSTtZQUNYLFNBQVMsRUFBRSxJQUFJO1lBQ2YsUUFBUSxFQUFFLFlBQVk7WUFDdEIsWUFBWSxFQUFFLFVBQVUsUUFBZ0IsRUFBRSxRQUFnQixFQUFFLENBQVE7Z0JBQ2hFLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDMUIsQ0FBQztZQUNELGNBQWMsRUFBRTtnQkFDWixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzFCLENBQUM7WUFDRCxVQUFVLEVBQUUsVUFBVSxRQUFnQixFQUFFLFFBQWdCO2dCQUNwRCxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN0QixPQUFPLENBQUMsR0FB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dCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZGVjbGFyZSBjb25zdCBDcnlwdG9KUzogYW55O1xyXG5kZWNsYXJlIGNvbnN0IHNvcnRhYmxlOiBhbnk7XHJcblxyXG5jbGFzcyBGaWxlVHJlZUJyb3dzZXIge1xyXG4gICAgY3VycmVudEZvbGRlcklkOiBzdHJpbmc7XHJcbiAgICBleHRUeXBlczogb2JqZWN0O1xyXG4gICAgZmlsZVR5cGVzOiBBcnJheTxzdHJpbmc+O1xyXG4gICAgZm9sZGVyc0NvbnRlbnQ6IEFycmF5PGFueT47XHJcbiAgICBpY29uczogYW55O1xyXG4gICAganNvblRyZWU6IGFueTtcclxuICAgIGxpc3RlbmluZ0ZvbGRlcnM6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIG9wdGlvbnM6IGFueTtcclxuICAgIHNjcmlwdFNyYzogc3RyaW5nO1xyXG4gICAgdGFyZ2V0SWQ6IHN0cmluZztcclxuICAgIHRlbXBsYXRlOiBhbnkgPSBudWxsO1xyXG5cclxuICAgIHRyZWVNYXJrdXA6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRhcmdldElkOiBzdHJpbmcsIG9wdGlvbnM6IGFueSA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG5cclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgY29ubmVjdG9yOiAncGhwJyxcclxuICAgICAgICAgICAgLy8gcHJlZml4IGZvbGRlciBuYW1lcyB0byBhY2NlcHQgbnVtYmVyZWQgZm9sZGVycy4gYWxsb3dlZCBjaGFycyA9IFthLXotXStcclxuICAgICAgICAgICAgZm9sZGVyUHJlZml4OiAnZm9sZGVyLScsXHJcbiAgICAgICAgICAgIGRyYWdBbmREcm9wOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBhdmFpbGFibGUgbW9kZXM6IGxpc3QgfCBncmlkXHJcbiAgICAgICAgICAgIGV4cGxvcmVyTW9kZTogJ2xpc3QnLFxyXG4gICAgICAgICAgICBleHRlbnNpb25zOiBbJy4qJ10sXHJcbiAgICAgICAgICAgIG1haW5EaXI6ICdkZW1vLWZpbGVzJyxcclxuICAgICAgICAgICAgbWF4RGVwaDogMyxcclxuICAgICAgICAgICAgY2FuY2VsQnRuOiB0cnVlLFxyXG4gICAgICAgICAgICBjYW5jZWxCdG5UZXh0OiAnQ2FuY2VsJyxcclxuICAgICAgICAgICAgb2tCdG46IHRydWUsXHJcbiAgICAgICAgICAgIG9rQnRuVGV4dDogJ09LJyxcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICdib290c3RyYXA0JyxcclxuICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbiAoZmlsZVBhdGg6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZywgZTogRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVOYW1lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FuY2VsQnRuQ2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYW5jZWwnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb2tCdG5DbGljazogZnVuY3Rpb24gKGZpbGVQYXRoOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi5kZWZhdWx0cywgLi4ub3B0aW9ucyB9O1xyXG5cclxuICAgICAgICB0aGlzLmljb25zID0ge1xyXG4gICAgICAgICAgICBhcmNoaXZlOiAnZnQtaWNvbi1maWxlLXppcCcsXHJcbiAgICAgICAgICAgIGV4Y2VsOiAnZnQtaWNvbi1maWxlLWV4Y2VsJyxcclxuICAgICAgICAgICAgZm9sZGVyOiAnZnQtaWNvbi1mb2xkZXInLFxyXG4gICAgICAgICAgICBmb2xkZXJPcGVuOiAnZnQtaWNvbi1mb2xkZXItb3BlbicsXHJcbiAgICAgICAgICAgIGh0bWw6ICdmdC1pY29uLWh0bWwtZml2ZTInLFxyXG4gICAgICAgICAgICBpbWFnZTogJ2Z0LWljb24tZmlsZS1waWN0dXJlJyxcclxuICAgICAgICAgICAgbXVzaWM6ICdmdC1pY29uLWZpbGUtbXVzaWMnLFxyXG4gICAgICAgICAgICBvcGVub2ZmaWNlOiAnZnQtaWNvbi1maWxlLW9wZW5vZmZpY2UnLFxyXG4gICAgICAgICAgICBwZGY6ICdmdC1pY29uLWZpbGUtcGRmJyxcclxuICAgICAgICAgICAgdGV4dDogJ2Z0LWljb24tZmlsZS10ZXh0MicsXHJcbiAgICAgICAgICAgIHZpZGVvOiAnZnQtaWNvbi1maWxlLXZpZGVvJyxcclxuICAgICAgICAgICAgd29yZDogJ2Z0LWljb24tZmlsZS13b3JkJyxcclxuICAgICAgICAgICAgZGVmYXVsdDogJ2Z0LWljb24tZmlsZS1lbXB0eSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZm9sZGVyc0NvbnRlbnQgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLmZpbGVUeXBlcyA9IE9iamVjdC5rZXlzKHRoaXMuaWNvbnMpO1xyXG4gICAgICAgIHRoaXMuZXh0VHlwZXMgPSB7XHJcbiAgICAgICAgICAgIGFyY2hpdmU6IFsnN3onLCAnNy1aaXAnLCAnYXJqJywgJ2RlYicsICdwa2cnLCAncmFyJywgJ3JwbScsICd0YXIuZ3onLCAneicsICd6aXAnXSxcclxuICAgICAgICAgICAgZXhjZWw6IFsneGxzJywgJ3hsc3gnXSxcclxuICAgICAgICAgICAgaHRtbDogWydodG0nLCAnaHRtbCddLFxyXG4gICAgICAgICAgICBpbWFnZTogWydibXAnLCAnZ2lmJywgJ2pwZycsICdqcGVnJywgJ3BuZycsICdzdmcnLCAndGlmJywgJ3RpZmYnLCAnd2VicCddLFxyXG4gICAgICAgICAgICBtdXNpYzogWydhaWYnLCAnbXAzJywgJ21wYScsICdvZ2cnLCAnd2F2JywgJ3dtYSddLFxyXG4gICAgICAgICAgICBvcGVub2ZmaWNlOiBbJ29kdCcsICdvdHQnLCAnb2RtJywgJ29kcycsICdvdHMnLCAnb2RnJywgJ290ZycsICdvZHAnLCAnb3RwJywgJ29kZicsICdvZGMnLCAnb2RiJ10sXHJcbiAgICAgICAgICAgIHBkZjogWydwZGYnXSxcclxuICAgICAgICAgICAgdGV4dDogWydydGYnLCAndGV4JywgJ3R4dCddLFxyXG4gICAgICAgICAgICB2aWRlbzogWyczZzInLCAnM2dwJywgJ2F2aScsICdmbHYnLCAnaDI2NCcsICdtNHYnLCAnbWt2JywgJ21vdicsICdtcDQnLCAnbXBnJywgJ3JtJywgJ3N3ZicsICd2b2InLCAnd212J10sXHJcbiAgICAgICAgICAgIHdvcmQ6IFsnZG9jJywgJ2RvY3gnXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY3JpcHRTcmMgPSB0aGlzLmdldFNjcmlwdFNjcigpO1xyXG5cclxuICAgICAgICB0aGlzLmdldEZpbGVzKClcclxuICAgICAgICAgICAgLnRoZW4oKGRhdGE6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5qc29uVHJlZSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5qc29uVHJlZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHRoaXMuanNvblRyZWUuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZFRyZWUoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZHJhZ0FuZERyb3AgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChDcnlwdG9KUykgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkU2NyaXB0KHRoaXMuc2NyaXB0U3JjICsgJ2xpYi9jcnlwdG8tanMvY3J5cHRvLWpzLm1pbi5qcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChzb3J0YWJsZSkgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkU2NyaXB0KHRoaXMuc2NyaXB0U3JjICsgJ2xpYi9odG1sNXNvcnRhYmxlL2h0bWw1c29ydGFibGUubWluLmpzJykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTY3JpcHQgbG9hZGluZyBmYWlsZWQgOiggJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1Z2gsIHRoZXJlIHdhcyBhbiBlcnJvciEnLCBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0ICR0YXJnZXRJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMubG9hZENzcygpO1xyXG4gICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yQWxsKCcuZnQtdHJlZScpWzBdLmlubmVySFRNTCA9IHRoaXMudHJlZU1hcmt1cDtcclxuICAgICAgICBjb25zdCBmb2xkZXJzID0gJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mdC10cmVlIC5mdC1mb2xkZXItY29udGFpbmVyJyk7XHJcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChmb2xkZXJzLCAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGFsbCB0aGUgcGFyZW50IGZvbGRlcnNcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudHMgPSB0aGlzLnBhcmVudHNVbnRpbChlbCwgJ2Z0LWZvbGRlci1jb250YWluZXInLCAnZnQtJyArIHRoaXMudGFyZ2V0SWQgKyAnLXJvb3QnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBvcGVuIGFsbCB0aGUgcGFyZW50IGZvbGRlcnMsIGNsb3NlIHRoZSBvdGhlcnNcclxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZm9sZGVycywgKGZvbGRlcjogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpYyA9IGZvbGRlci5xdWVyeVNlbGVjdG9yKCdpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudHMuaW5kZXhPZihmb2xkZXIpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVyLmNsYXNzTGlzdC5hZGQoJ2Z0LWZvbGRlci1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pY29ucy5mb2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpYy5jbGFzc0xpc3QuYWRkKHRoaXMuaWNvbnMuZm9sZGVyT3Blbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Z0LWZvbGRlci1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljLmNsYXNzTGlzdC5hZGQodGhpcy5pY29ucy5mb2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpYy5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuaWNvbnMuZm9sZGVyT3Blbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGb2xkZXJJZCA9IGVsLmdldEF0dHJpYnV0ZSgnaWQnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZEZvbGRlcih0aGlzLmN1cnJlbnRGb2xkZXJJZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGxvYWQgdGhlIHJvb3QgZm9sZGVyIGV4cGxvcmVyIGNvbnRlbnRcclxuICAgICAgICB0aGlzLmN1cnJlbnRGb2xkZXJJZCA9ICdmdC0nICsgdGhpcy50YXJnZXRJZCArICctcm9vdCc7XHJcbiAgICAgICAgdGhpcy5sb2FkRm9sZGVyKHRoaXMuY3VycmVudEZvbGRlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogTG9hZCBqcy10cmVlICsgaWNvbiBsaWIgQ1NTXHJcbiAgICAqL1xyXG4gICAgcHJpdmF0ZSBsb2FkQ3NzKCkge1xyXG4gICAgICAgIGNvbnN0IGZ0SWNvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnQtaWNvbnMnKTtcclxuICAgICAgICBpZiAoZnRJY29ucyA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnNldEF0dHJpYnV0ZSgnaWQnLCAnZnQtaWNvbnMnKTtcclxuICAgICAgICAgICAgbGlua0VsZW1lbnQuc2V0QXR0cmlidXRlKCdyZWwnLCAnc3R5bGVzaGVldCcpO1xyXG4gICAgICAgICAgICBsaW5rRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTtcclxuICAgICAgICAgICAgbGlua0VsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgdGhpcy5zY3JpcHRTcmMgKyAnaWNvbnMvc3R5bGUuY3NzJyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQobGlua0VsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmdENzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmdC1zdHlsZXMnKTtcclxuICAgICAgICBpZiAoZnRDc3MgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xyXG4gICAgICAgICAgICBsaW5rRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Z0LXN0eWxlcycpO1xyXG4gICAgICAgICAgICBsaW5rRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdzdHlsZXNoZWV0Jyk7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpO1xyXG4gICAgICAgICAgICBsaW5rRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCB0aGlzLnNjcmlwdFNyYyArICd0ZW1wbGF0ZXMvJyArIHRoaXMub3B0aW9ucy50ZW1wbGF0ZSArICcuY3NzJyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQobGlua0VsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRTY3JpcHQoc3JjOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXMobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBidWlsZEZvbGRlckNvbnRlbnQoanN0OiBBcnJheTxhbnk+LCB1cmw6IHN0cmluZywgZGVwaDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyQ29udGVudDogYW55ID0ge1xyXG4gICAgICAgICAgICBmb2xkZXJzOiBbXSxcclxuICAgICAgICAgICAgZmlsZXM6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBqc3QpIHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlOiBhbnkgPSBqc3Rba2V5XTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAodmFsdWUuZXh0KSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdG9yeVxyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGE6IGFueSA9IGpzdFtrZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyTmFtZSA9IGtleS5yZXBsYWNlKHRoaXMub3B0aW9ucy5mb2xkZXJQcmVmaXgsICcnKTtcclxuICAgICAgICAgICAgICAgIGZvbGRlckNvbnRlbnQuZm9sZGVycy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGRhdGEucGFyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFSZWZJZDogdGhpcy5zYW5pdGl6ZUZvbGRlck9yRmlsZShrZXksICdmb2xkZXInKSArICctJyArIChkZXBoICsgMSkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmb2xkZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsICsgZm9sZGVyTmFtZSArICcvJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmaWxlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlZGF0YSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihmaWxlZGF0YSwgeyB0eXBlOiB0aGlzLmdldEZpbGVUeXBlKGZpbGVkYXRhLmV4dCkgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpY29uOiBzdHJpbmcgPSB0aGlzLmljb25zW2ZpbGVkYXRhLnR5cGVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVkYXRhLnR5cGUgPT09ICdpbWFnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb2xkZXJDb250ZW50LmZpbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWxlZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpY29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBmaWxlZGF0YS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCArIGZpbGVkYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyQ29udGVudC5maWxlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsZWRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaWNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZWRhdGEuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZmlsZWRhdGEudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwgKyBmaWxlZGF0YS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkZXJDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRUcmVlKGpzdDogQXJyYXk8c3RyaW5nPiA9IHRoaXMuanNvblRyZWUsIHVybDogc3RyaW5nID0gdGhpcy5vcHRpb25zLm1haW5EaXIgKyAnLycsIGRlcGg6IG51bWJlciA9IDApIHtcclxuICAgICAgICBpZiAoZGVwaCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCByb290SWQ6IGFueSA9ICdmdC0nICsgdGhpcy50YXJnZXRJZCArICctcm9vdCc7XHJcbiAgICAgICAgICAgIHRoaXMudHJlZU1hcmt1cCA9IGA8dWwgY2xhc3M9XCJmdC10cmVlXCI+PGxpIGlkPVwiJHtyb290SWR9XCIgY2xhc3M9XCJmdC1mb2xkZXItY29udGFpbmVyIGZ0LWZvbGRlci1vcGVuXCI+PGRpdj48aSBjbGFzcz1cIiR7dGhpcy5pY29ucy5mb2xkZXJPcGVufVwiPjwvaT48YSBocmVmPVwiI1wiIGRhdGEtdXJsPVwiJHt1cmx9XCI+cm9vdDwvYT48L2Rpdj5gO1xyXG4gICAgICAgICAgICB0aGlzLmZvbGRlcnNDb250ZW50W3Jvb3RJZF0gPSB0aGlzLmJ1aWxkRm9sZGVyQ29udGVudCh0aGlzLmpzb25UcmVlLCB1cmwsIGRlcGgpO1xyXG4gICAgICAgICAgICBkZXBoICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBqc3QpIHtcclxuICAgICAgICAgICAgbGV0IGpzb25TdWJUcmVlOiBhbnkgPSBqc3Rba2V5XTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoanNvblN1YlRyZWUuZXh0KSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdG9yeVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVySWQ6IGFueSA9IHRoaXMuc2FuaXRpemVGb2xkZXJPckZpbGUoa2V5LCAnZm9sZGVyJykgKyAnLScgKyBkZXBoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJOYW1lID0ga2V5LnJlcGxhY2UodGhpcy5vcHRpb25zLmZvbGRlclByZWZpeCwgJycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb2xkZXJzQ29udGVudFtmb2xkZXJJZF0gPSB0aGlzLmJ1aWxkRm9sZGVyQ29udGVudChqc29uU3ViVHJlZSwgdXJsICsgZm9sZGVyTmFtZSArICcvJywgZGVwaCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVNYXJrdXAgKz0gYDx1bD48bGkgaWQ9XCIke2ZvbGRlcklkfVwiIGNsYXNzPVwiZnQtZm9sZGVyLWNvbnRhaW5lclwiPjxkaXY+PGkgY2xhc3M9XCIke3RoaXMuaWNvbnMuZm9sZGVyfVwiPjwvaT48YSBocmVmPVwiI1wiIGRhdGEtdXJsPVwiJHt1cmwgKyBmb2xkZXJOYW1lfVwiPiR7Zm9sZGVyTmFtZX08L2E+PC9kaXY+YDtcclxuICAgICAgICAgICAgICAgIGlmIChkZXBoIDwgdGhpcy5vcHRpb25zLm1heERlcGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkVHJlZShqc29uU3ViVHJlZSwgdXJsICsgZm9sZGVyTmFtZSArICcvJywgZGVwaCArIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50cmVlTWFya3VwICs9IGA8L2xpPjwvdWw+YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVwaCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyZWVNYXJrdXAgKz0gYDwvbGk+PC91bD5gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuYWJsZURyYWcoKSB7XHJcbiAgICAgICAgbGV0IGV4cGxvcmVyQ29udGFpbmVyU2VsZWN0b3I6IHN0cmluZyA9ICcuZnQtZXhwbG9yZXItbGlzdC1jb250YWluZXInO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhwbG9yZXJNb2RlID09PSAnZ3JpZCcpIHtcclxuICAgICAgICAgICAgZXhwbG9yZXJDb250YWluZXJTZWxlY3RvciA9ICcuZnQtZXhwbG9yZXItZ3JpZC1jb250YWluZXInO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZvbGRlcnM6IGFueSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudGFyZ2V0SWQpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mdC1mb2xkZXItY29udGFpbmVyJyk7XHJcbiAgICAgICAgc29ydGFibGUoZXhwbG9yZXJDb250YWluZXJTZWxlY3Rvciwge1xyXG4gICAgICAgICAgICBpdGVtczogJy5mdC1maWxlLWNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgIGFjY2VwdEZyb206IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZm9sZGVycy5mb3JFYWNoKChmb2xkZXI6IHsgZ2V0QXR0cmlidXRlOiAoYXJnMDogc3RyaW5nKSA9PiBhbnk7IH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVySWQ6IHN0cmluZyA9IGZvbGRlci5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybihmb2xkZXJJZCArICcgPT4gJyArIHRoaXMuY3VycmVudEZvbGRlcklkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuaW5nRm9sZGVycy5pbmRleE9mKGZvbGRlcklkKSA9PT0gLTEgfHwgZm9sZGVySWQubWF0Y2goL15leHBsb3Jlci0vKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvbGRlcklkICE9PSB0aGlzLmN1cnJlbnRGb2xkZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlKCcjJyArIGZvbGRlcklkLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdEZyb206ICcuZnQtZXhwbG9yZXItbGlzdC1jb250YWluZXIsIC5mdC1leHBsb3Jlci1ncmlkLWNvbnRhaW5lcidcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmluZ0ZvbGRlcnMucHVzaChmb2xkZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xpc3RlbmluZyAjJyArIGZvbGRlcklkKTtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZSgnIycgKyBmb2xkZXJJZClbMF0uYWRkRXZlbnRMaXN0ZW5lcignc29ydHVwZGF0ZScsIHRoaXMubW92ZUZpbGUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdza2lwICMnICsgZm9sZGVySWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZvbGRlcklkID09PSB0aGlzLmN1cnJlbnRGb2xkZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgc29ydGFibGUoJyMnICsgZm9sZGVySWQsICdkaXNhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGlzYWJsZSAjJyArIGZvbGRlcklkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNvcnRhYmxlKCcjJyArIGZvbGRlcklkLCAnZW5hYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZW5hYmxlICMnICsgZm9sZGVySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtb3ZlRmlsZShlOiBhbnkpIHtcclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZS5kZXRhaWwuaXRlbS5jaGlsZHJlbi5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGUuZGV0YWlsLml0ZW0uY2hpbGRyZW5baW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LmZpbGVuYW1lICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudC5kYXRhc2V0LmhyZWYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2FsdDogc3RyaW5nID0gJyV0JHFQUCc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlaGFzaDogc3RyaW5nID0gZW5jb2RlVVJJQ29tcG9uZW50KENyeXB0b0pTLlNIQTI1NihlbGVtZW50LmRhdGFzZXQuaHJlZiArIHNhbHQpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZW5hbWU6IHN0cmluZyA9IGVuY29kZVVSSUNvbXBvbmVudChlbGVtZW50LmRhdGFzZXQuZmlsZW5hbWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZXBhdGg6IHN0cmluZyA9IGVuY29kZVVSSUNvbXBvbmVudChlbGVtZW50LmRhdGFzZXQuaHJlZik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleHQ6IHN0cmluZyA9IGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucykpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkZXN0cGF0aDogc3RyaW5nID0gdGhpcy5vcHRpb25zLm1haW5EaXI7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5kZXRhaWwuZGVzdGluYXRpb24uY29udGFpbmVyLmlkICE9PSAnZnQtJyArIHRoaXMudGFyZ2V0SWQgKyAnLXJvb3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdHBhdGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmRldGFpbC5kZXN0aW5hdGlvbi5jb250YWluZXIuaWQucmVwbGFjZSgvXmV4cGxvcmVyLS8sICcnKSkucXVlcnlTZWxlY3RvcignZGl2W2RyYWdnYWJsZT1cInRydWVcIl0gPiBhJykuZ2V0QXR0cmlidXRlKCdkYXRhLXVybCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVzdHBhdGggKz0gJy8nICsgZWxlbWVudC5kYXRhc2V0LmZpbGVuYW1lO1xyXG4gICAgICAgICAgICAgICAgZGVzdHBhdGggPSBlbmNvZGVVUklDb21wb25lbnQoZGVzdHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlc3RwYXRoICE9PSBmaWxlcGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGE6IHN0cmluZyA9IGBmaWxlbmFtZT0ke2ZpbGVuYW1lfSZmaWxlcGF0aD0ke2ZpbGVwYXRofSZkZXN0cGF0aD0ke2Rlc3RwYXRofSZmaWxlaGFzaD0ke2ZpbGVoYXNofSZleHQ9JHtleHR9YDtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGUuZGV0YWlsLml0ZW0uY2hpbGRyZW4ubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSB0aGUgZmlsZSBvbiBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCdQT1NUJywgdGhpcy5zY3JpcHRTcmMgKyAnYWpheC9tb3ZlLWZpbGUucGhwJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Qub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPj0gMjAwICYmIHJlcXVlc3Quc3RhdHVzIDwgNDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWNjZXNzIVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcCA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmRldGFpbC5kZXN0aW5hdGlvbi5jb250YWluZXIuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1JbmRleDogbnVtYmVyID0gZS5kZXRhaWwuZGVzdGluYXRpb24uaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkcmVuW2l0ZW1JbmRleF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjb250YWluZXIuY2hpbGRyZW5baXRlbUluZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlYnVpbGQgdHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsZXMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2VkYXRhOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuanNvblRyZWUgPSBKU09OLnBhcnNlKHJlc3BvbnNlZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5qc29uVHJlZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHRoaXMuanNvblRyZWUuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZFRyZWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1Z2gsIHRoZXJlIHdhcyBhbiBlcnJvciEnLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZXNwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FqYXggcXVlcnkgZmFpbGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZXJlIHdhcyBhIGNvbm5lY3Rpb24gZXJyb3Igb2Ygc29tZSBzb3J0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRGaWxlVHlwZShleHQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHg6IGFueSA9IHRoaXMuZXh0VHlwZXM7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHgpIHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlOiBhbnkgPSB4W2tleV07XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKGV4dCkgIT09IC0xKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICdkZWZhdWx0JztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZpbGVzKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB0aGlzLnNjcmlwdFNyYyArICdjb25uZWN0b3JzL2Nvbm5lY3Rvci4nICsgdGhpcy5vcHRpb25zLmNvbm5lY3RvciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04Jyk7XHJcbiAgICAgICAgICAgIHhoci5zZW5kKCdkaXI9JyArIGVuY29kZVVSSSh0aGlzLm9wdGlvbnMubWFpbkRpcikgKyAnJmV4dD0nICsgSlNPTi5zdHJpbmdpZnkodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMpICsgJyZmb2xkZXJfcHJlZml4PScgKyB0aGlzLm9wdGlvbnMuZm9sZGVyUHJlZml4KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFNjcmlwdFNjcigpIHtcclxuICAgICAgICBjb25zdCBzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBzYy5sZW5ndGg7IGlkeCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHMgPSBzYy5pdGVtKGlkeCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocy5zcmMgJiYgcy5zcmMubWF0Y2goL2ZpbGUtdHJlZS1icm93c2VyKFxcLm1pbik/XFwuanMkLykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzLnNyYy5yZXBsYWNlKC9qc1xcL2ZpbGUtdHJlZS1icm93c2VyKFxcLm1pbik/XFwuanMkLywgJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaHVtYW5GaWxlU2l6ZShieXRlczogbnVtYmVyLCBzaTogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IHRocmVzaCA9IHNpID8gMTAwMCA6IDEwMjQ7XHJcbiAgICAgICAgaWYgKE1hdGguYWJzKGJ5dGVzKSA8IHRocmVzaCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnl0ZXMgKyAnIEInO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bml0cyA9IHNpXHJcbiAgICAgICAgICAgID8gWydrQicsICdNQicsICdHQicsICdUQicsICdQQicsICdFQicsICdaQicsICdZQiddXHJcbiAgICAgICAgICAgIDogWydLaUInLCAnTWlCJywgJ0dpQicsICdUaUInLCAnUGlCJywgJ0VpQicsICdaaUInLCAnWWlCJ107XHJcbiAgICAgICAgbGV0IHUgPSAtMTtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGJ5dGVzIC89IHRocmVzaDtcclxuICAgICAgICAgICAgKyt1O1xyXG4gICAgICAgIH0gd2hpbGUgKE1hdGguYWJzKGJ5dGVzKSA+PSB0aHJlc2ggJiYgdSA8IHVuaXRzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIHJldHVybiBieXRlcy50b0ZpeGVkKDEpICsgJyAnICsgdW5pdHNbdV07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkRm9sZGVyKGZvbGRlcklkOiBhbnkpIHtcclxuICAgICAgICBjb25zdCAkdGFyZ2V0SWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnRhcmdldElkKTtcclxuICAgICAgICBjb25zdCBmb2xkZXJDb250ZW50ID0gdGhpcy5mb2xkZXJzQ29udGVudFtmb2xkZXJJZF07XHJcbiAgICAgICAgbGV0IGNsb25lOiBhbnk7XHJcbiAgICAgICAgbGV0IG91dHB1dDogYW55O1xyXG4gICAgICAgIHRoaXMubG9hZFRlbXBsYXRlcygpLnRoZW4oKHRlbXBsYXRlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJzID0gZm9sZGVyQ29udGVudC5mb2xkZXJzO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IGZvbGRlckNvbnRlbnQuZmlsZXM7XHJcblxyXG4gICAgICAgICAgICBsZXQgZXhwbG9yZXJDb250YWluZXI6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCBleHBsb3JlckZpbGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCBleHBsb3JlckZvbGRlcjogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IGV4cGxvcmVySW1hZ2U6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCBleHBsb3JlckFjdGlvbkJ0bnM6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCBleHBsb3Jlck1vZGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBleHBsb3JlckFjdGlvbkJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwbG9yZXItYWN0aW9uLWJ0bnMnKTtcclxuICAgICAgICAgICAgY29uc3QgZXhwbG9yZXJBY3Rpb25CdG5zQ2xvbmUgPSBleHBsb3JlckFjdGlvbkJ0bnMuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICBleHBsb3Jlck1vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwbG9yZXItbW9kZScpO1xyXG4gICAgICAgICAgICBjb25zdCBleHBsb3Jlck1vZGVDbG9uZSA9IGV4cGxvcmVyTW9kZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLmV4cGxvcmVyTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGlzdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwbG9yZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwbG9yZXItbGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGxvcmVyRmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleHBsb3Jlci1saXN0LWZpbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBleHBsb3JlckZvbGRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleHBsb3Jlci1saXN0LWZvbGRlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGxvcmVySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwbG9yZXItbGlzdC1pbWFnZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGV4cGxvcmVyQ29udGFpbmVyLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmZ0LWV4cGxvcmVyLWxpc3QtY29udGFpbmVyJykuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICdncmlkJzpcclxuICAgICAgICAgICAgICAgICAgICBleHBsb3JlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleHBsb3Jlci1ncmlkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwbG9yZXJGaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGxvcmVyLWdyaWQtZmlsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGxvcmVyRm9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGxvcmVyLWdyaWQtZm9sZGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwbG9yZXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleHBsb3Jlci1ncmlkLWltYWdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gZXhwbG9yZXJDb250YWluZXIuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZnQtZXhwbG9yZXItZ3JpZC1jb250YWluZXInKS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBmb2xkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZm9sZGVyOiBhbnkgPSBmb2xkZXJzW2tleV07XHJcbiAgICAgICAgICAgICAgICBjbG9uZSA9IGV4cGxvcmVyRm9sZGVyLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgY2xvbmUucXVlcnlTZWxlY3RvcignbGknKS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2V4cGxvcmVyLScgKyBmb2xkZXIuZGF0YVJlZklkKTtcclxuICAgICAgICAgICAgICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5mdC1mb2xkZXInKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicsIGZvbGRlci5kYXRhUmVmSWQpO1xyXG4gICAgICAgICAgICAgICAgY2xvbmUucXVlcnlTZWxlY3RvcignLmZ0LWZvbGRlciBpJykuY2xhc3NMaXN0LmFkZCh0aGlzLmljb25zLmZvbGRlcik7XHJcbiAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtZm9sZGVybmFtZScpLmlubmVySFRNTCA9IGZvbGRlci5uYW1lO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LmFwcGVuZENoaWxkKGNsb25lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGZpbGVzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsZTogYW55ID0gZmlsZXNba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdpbWFnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2xvbmVJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IGV4cGxvcmVySW1hZ2UuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUucXVlcnlTZWxlY3RvcignLmZ0LWltYWdlZGVzYycpLnNldEF0dHJpYnV0ZSgnaWQnLCBjbG9uZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtaW1hZ2UnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicsIGZpbGUudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtaW1hZ2UnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsZW5hbWUnLCBmaWxlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5mdC1pbWFnZSBpbWcnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGZpbGUudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtaW1hZ2VuYW1lJykuaW5uZXJIVE1MID0gZmlsZS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5hcHBlbmRDaGlsZChjbG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBmaWxlLnVybDtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWw6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2xvbmVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvcignLmZ0LWltYWdlLXNpemUnKS5pbm5lckhUTUwgPSBpbWcud2lkdGgudG9TdHJpbmcoKSArICd4JyArIGltZy5oZWlnaHQudG9TdHJpbmcoKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IGV4cGxvcmVyRmlsZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtZmlsZScpLnNldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJywgZmlsZS51cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5mdC1maWxlJykuc2V0QXR0cmlidXRlKCdkYXRhLWZpbGVuYW1lJywgZmlsZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtZmlsZSBpJykuY2xhc3NMaXN0LmFkZChmaWxlLmljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5mdC1maWxlbmFtZScpLmlubmVySFRNTCA9IGZpbGUubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtZmlsZXNpemUnKS5pbm5lckhUTUwgPSB0aGlzLmh1bWFuRmlsZVNpemUoZmlsZS5zaXplLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYXBwZW5kQ2hpbGQoY2xvbmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yKCcuZnQtZXhwbG9yZXInKS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3IoJy5mdC1leHBsb3JlcicpLmFwcGVuZENoaWxkKGV4cGxvcmVyTW9kZUNsb25lKTtcclxuICAgICAgICAgICAgJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3IoJy5mdC1leHBsb3JlcicpLmFwcGVuZENoaWxkKG91dHB1dCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9rQnRuID09PSB0cnVlIHx8IHRoaXMub3B0aW9ucy5jYW5jZWxCdG4gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yKCcuZnQtZXhwbG9yZXInKS5hcHBlbmRDaGlsZChleHBsb3JlckFjdGlvbkJ0bnNDbG9uZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9rQnRuICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3IoJy5leHBsb3Jlci1vay1idG4nKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3IoJy5leHBsb3Jlci1vay1idG4nKS50ZXh0Q29udGVudCA9IHRoaXMub3B0aW9ucy5va0J0blRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhbmNlbEJ0biAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yKCcuZXhwbG9yZXItY2FuY2VsLWJ0bicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2xhdGVcclxuICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0SWQucXVlcnlTZWxlY3RvcignLmV4cGxvcmVyLWNhbmNlbC1idG4nKS50ZXh0Q29udGVudCA9IHRoaXMub3B0aW9ucy5jYW5jZWxCdG5UZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5va0J0biA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yKCcuZXhwbG9yZXItb2stYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0OiBhbnkgPSAkdGFyZ2V0SWQucXVlcnlTZWxlY3RvcignLmZ0LWZpbGUtY29udGFpbmVyLmFjdGl2ZSBhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEZpbGVuYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1maWxlbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SHJlZiA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9rQnRuQ2xpY2sodGFyZ2V0SHJlZiwgdGFyZ2V0RmlsZW5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ05vdGhpbmcgc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2FuY2VsQnRuID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3IoJy5leHBsb3Jlci1jYW5jZWwtYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNhbmNlbEJ0bkNsaWNrKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2RlQnRucyA9IEFycmF5LmZyb20oJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mdC1leHBsb3Jlci1tb2RlIC5leHBsb3Jlci1tb2RlLWJ0bicpKTtcclxuXHJcbiAgICAgICAgICAgIC8qIGFkZCBleHBsb3JlciBtb2RlIGJ1dHRvbnMgZXZlbnRzICYgYWN0aXZhdGUgdGhlIGN1cnJlbnQgYnRuICovXHJcblxyXG4gICAgICAgICAgICBtb2RlQnRucy5mb3JFYWNoKG0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG0uZ2V0QXR0cmlidXRlKCd2YWx1ZScpID09PSB0aGlzLm9wdGlvbnMuZXhwbG9yZXJNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hNb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRm9sZGVyKGZvbGRlcklkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8qIGFkZCBleHBsb3JlciBlbGVtZW50cyBldmVudHMgKi9cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbSgkdGFyZ2V0SWQucXVlcnlTZWxlY3RvckFsbCgnLmZ0LWV4cGxvcmVyIGFbZGF0YS1ocmVmXScpKTtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudENvbnRhaW5lcnMgPSBBcnJheS5mcm9tKCR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yQWxsKCcuZnQtZXhwbG9yZXIgLmZ0LWZpbGUtY29udGFpbmVyJykpO1xyXG4gICAgICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50Q29udGFpbmVycy5mb3JFYWNoKGVsQ29udGFpbmVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0OiBhbnkgPSBlLnRhcmdldC5jbG9zZXN0KCdhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuZnQtZmlsZS1jb250YWluZXInKSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xvc2VzdCgnLmZ0LWZpbGUtY29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEZpbGVuYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1maWxlbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRIcmVmID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5lbGVtZW50Q2xpY2sodGFyZ2V0SHJlZiwgdGFyZ2V0RmlsZW5hbWUsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8qIGFkZCBleHBsb3JlciBmb2xkZXIgZXZlbnRzICovXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmtzID0gQXJyYXkuZnJvbSgkdGFyZ2V0SWQucXVlcnlTZWxlY3RvckFsbCgnLmZ0LWV4cGxvcmVyIGEuZnQtZm9sZGVyJykpO1xyXG4gICAgICAgICAgICBsaW5rcy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0OiBhbnkgPSBlLnRhcmdldC5jbG9zZXN0KCdhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuaW5pdEV2ZW50KCdjbGljaycsIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGVuYWJsZSBmaWxlcyAvIGZvbGRlcnMgZHJhZyAmIGRyb3BcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kcmFnQW5kRHJvcCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVEcmFnKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1Z2gsIHRoZXJlIHdhcyBhbiBlcnJvciEnLCBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRUZW1wbGF0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGVtcGxhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmdE1vZGUgPSB0aGlzLm9wdGlvbnMuZXhwbG9yZXJNb2RlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMuc2NyaXB0U3JjICsgJ3RlbXBsYXRlcy8nICsgdGhpcy5vcHRpb25zLnRlbXBsYXRlICsgJy5odG1sJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2V4cGxvcmVyLScgKyBmdE1vZGUpLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IHhoci5yZXNwb25zZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChkaXYuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2LmNoaWxkcmVuWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJlbnRzVW50aWwoZWw6IGFueSwgc2VhcmNoQ2xhc3M6IHN0cmluZywgc3RvcEVsZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgUGFyZW50cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHdoaWxlIChlbC5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoc2VhcmNoQ2xhc3MpKSB7XHJcbiAgICAgICAgICAgICAgICBQYXJlbnRzLnB1c2goZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgaWYgKGVsLmlkID09PSBzdG9wRWxlbWVudElkKSB7XHJcbiAgICAgICAgICAgICAgICBQYXJlbnRzLnB1c2goZWwpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcmVudHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBhcmVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiBTYW5pdGl6ZXMgYSBmb2xkZXIgb3IgZmlsZSBuYW1lIHRvIHdvcmsgd2l0aCAjbmFtZSBvZiBsZWdhY3kgc3lzdGVtXHJcbiAqICAgICAgICAgICAgICBMZWdhY3kgc3lzdGVtIHVua25vd25cclxuICogQGF1dGhvciBCTTY3XHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBzdHJpbmcgdG8gc2FuaXRpemVcclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgIE9wdGlvbmFsIFwiZmlsZVwiIG9yIGRlZmF1bHQgaXMgYXNzdW1lZCBcImZvbGRlclwiXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gVGhlIHNhbml0aXplZCBuYW1lXHJcbiAqL1xyXG4gICAgcHJpdmF0ZSBzYW5pdGl6ZUZvbGRlck9yRmlsZShuYW1lOiBzdHJpbmcsIHR5cGU6IHN0cmluZykge1xyXG4gICAgICAgIHZhciBwYXJ0cywgZXh0ID0gXCJcIjtcclxuICAgICAgICBpZiAodHlwZSA9PT0gXCJmaWxlXCIpIHtcclxuICAgICAgICAgICAgcGFydHMgPSBuYW1lLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgZXh0ID0gXCIuXCIgKyBwYXJ0cy5wb3AoKTtcclxuICAgICAgICAgICAgbmFtZSA9IHBhcnRzLmpvaW4oXCJfXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zOiBBcnJheTxBcnJheTxhbnk+PiA9XHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgIFsvWytcXCZdL2csIFwidVwiXSxcclxuICAgICAgICAgICAgICAgIFsvw6QvZywgXCJhZVwiXSxcclxuICAgICAgICAgICAgICAgIFsvw7YvZywgXCJvZVwiXSxcclxuICAgICAgICAgICAgICAgIFsvw7wvZywgXCJ1ZVwiXSxcclxuICAgICAgICAgICAgICAgIFsvw58vZywgXCJzc1wiXSxcclxuICAgICAgICAgICAgICAgIFsvWyBcXGBcXMK0XFw/XFwoXFwpXFxbXFxdXFx7XFx9XFwvXFxcXCRcXMKnXFxcIlxcJ1xcIVxcPVxcLVxcLlxcLFxcO1xcOjw+XFx8XFxeXFzCsFxcKlxcK1xcflxcJV0vZywgXCJfXCJdXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gbmFtZSA9IG5hbWUucmVwbGFjZShpdGVtWzBdLCBpdGVtWzFdKSk7XHJcbiAgICAgICAgcmV0dXJuIG5hbWUgKyBleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzd2l0Y2hNb2RlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhwbG9yZXJNb2RlID09PSAnbGlzdCcpIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmV4cGxvcmVyTW9kZSA9ICdncmlkJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZXhwbG9yZXJNb2RlID0gJ2xpc3QnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5saXN0ZW5pbmdGb2xkZXJzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0ZW5pbmdGb2xkZXJzW2luZGV4XS5tYXRjaCgvXmV4cGxvcmVyLS8pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmluZ0ZvbGRlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuT2JqZWN0LmFzc2lnbih3aW5kb3csIHsgRmlsZVRyZWVCcm93c2VyIH0pO1xyXG4iXX0="}